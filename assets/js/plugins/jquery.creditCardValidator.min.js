(function(){var n,t=[].indexOf||function(n){for(var t=0,e=this.length;e>t;t++)if(t in this&&this[t]===n)return t;return-1};n=jQuery,n.fn.validateCreditCard=function(e){var a,r,i,l,h,u,c;return a=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],r=function(n){var t,e,r;for(e=0,r=a.length;r>e;e++)if(t=a[e],n.match(t.pattern))return t;return null},l=function(n){var t,e,a,r,i,l;for(a=0,l=n.split("").reverse(),e=r=0,i=l.length;i>r;e=++r)t=l[e],t=+t,e%2?(t*=2,a+=10>t?t:t-9):a+=t;return a%10===0},i=function(n,e){var a;return a=n.length,t.call(e.valid_length,a)>=0},c=function(n){var t,a,h;return t=r(n),h=!1,a=!1,null!=t&&(h=l(n),a=i(n,t)),e({card_type:t,luhn_valid:h,length_valid:a})},u=function(){var t;return t=h(n(this).val()),c(t)},h=function(n){return n.replace(/[ -]/g,"")},this.bind("input",function(){return n(this).unbind("keyup"),u.call(this)}),this.bind("keyup",function(){return u.call(this)}),0!==this.length&&u.call(this),this}}).call(this);